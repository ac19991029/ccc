# 使用 ChatGPT 改进提示工程的提示模式目录

## Abstract

提示工程是一项越来越重要的技能集，需要有效地与大型语言模型(如ChatGPT)进行交流。**提示是给LLM的指令**，用于**执行规则、自动化流程和确保生成的输出的特定质量(和数量)**。提示也**是一种编程形式，可以自定义输出和与LLM的交互。**

本文描述了**以模式形式呈现的提示工程技术的目录**，这些技术已被应用于解决与llm交谈时的常见问题。提示模式是一种类似于软件模式的知识转移方法，因为它们为特定上下文中面临的常见问题提供了可重用的解决方案，例如，使用llm时的输出生成和交互。

本文为应用llm实现软件开发任务自动化的即时工程研究提供了以下贡献。首先，它**提供了一个框架，用于记录结构化提示符的模式**，以解决一系列问题，从而使它们能够适应不同的领域。其次，它**给出了一个成功应用于改进LLM对话输出的模式目录**。第三，它解释了**如何从多个模式构建提示**，并举例说明了与其他提示模式结合后可以受益的提示模式。

## Introduction

本文着重于增强llm在几个领域的应用，例如帮助开发人员有效地使用不熟悉的api编写代码，或者允许学生获得新的编码技能和技术。

llm在人类和人工智能工具作为值得信赖的合作者共同工作的领域尤其有前途，可以更快速、更可靠地发展依赖软件的系统。例如，llm被直接集成到软件工具中，如Github的Co-Pilot，并包含在集成开发环境(IDE)中，如IntelliJ和Visual Studio Code，从而允许软件团队直接从他们首选的IDE访问这些工具。

**提示符是提供给LLM的一组指令，它通过自定义和/或增强或细化LLM的功能来对LLM进行编程。**提示可以**通过一组初始规则为LLM对话提供特定的规则和指导方针**，从而影响与LLM的后续交互和由LLM生成的输出。特别是，提示符为对话设置上下文，并告诉LLM哪些信息是重要的，期望的输出形式和内容应该是什么。

提示符可以指定LLM应该只生成遵循特定编码风格或编程范例的代码。同样，它可以指定LLM应该标记生成的文档中的某些关键字或短语，并提供与这些关键字相关的附加信息。

**提示工程是通过提示来编程llm的方法。**

**提示模式是有效提示工程的关键。**本文的一个关键贡献是介绍了提示模式，以记录在使用会话型llm时系统地设计不同输出和交互目标的成功方法。我们主要关注与工程领域无关的提示模式，并介绍了基本提示模式的目录，以解决从可视化和代码工件的生产到帮助事实检查输出的输出步骤自动化等问题。

## 比较软件模式和提示模式

本文的贡献之一是它提供了一个框架来记录模式，这些模式可以通过结构提示来解决一系列可以适应不同领域的软件任务。

这个框架非常有用，因为它**专注于编纂模式**，这些模式可用于**帮助用户在各种上下文中更好地与会话型llm交互**，而不是简单地讨论有趣的示例或特定于领域的提示。

### Overview of Software Patterns

软件模式为**特定上下文中反复出现的问题提供了可重用**的解决方案。文档化的软件模式简明地传达(和概括)了正在处理的特定问题，以确定在成功的解决方案中应该解决的重要力量和/或需求。

模式表单还包括关于如何实现模式的指导，以及在实现模式时需要考虑的权衡和注意事项的信息。此外，还经常提供模式的示例应用程序，以进一步展示模式在实践中的实用功能。软件模式通常以程式化的形式进行文档化，以方便它们的使用和理解，例如

1. **名称和分类**。每个模式都有一个标识模式的名称，应该一致使用。分类将模式分为广泛的类别，如创造性的、结构性的或行为性的。
2. **意图**简洁地传达了模式要达到的目的。
3. **动机**记录模式要解决的潜在问题以及问题的重要性。
4. **结构和参与者**。这个结构描述了不同的模式参与者(例如类和对象)，以及他们如何协作以形成一个通用的解决方案。
5. **示例代码**具体地将模式映射到一些底层编程语言和AIDS开发人员，以便更深入地了解如何有效地应用该模式。
6. **Consequences**总结在实践中应用该模式的利弊。

### Overview of Prompt Patterns

提示模式与软件模式相似，它们为**特定的问题提供可重用的解决方案**。然而，他们更具体地关注从大规模语言模型(如ChatGPT)生成输出的上下文。就像软件模式提供了一种编码的方法来解决常见的软件开发挑战一样，提示模式也提供了一种编码的方法来定制llm的输出和交互。

### 定义提示语结构和思想的评估方法

在软件模式中，**结构和参与者通常是根据UML图来定义的**，例如结构图和/或交互图。这些UML图**解释了模式的参与者是什么，以及他们如何交互以解决问题**。在提示模式中，需要一些类似的东西，尽管UML可能不是一种合适的结构化文档方法，因为它的目的是描述软件结构，而不是在提示中交流的思想

### 未来之路:基本情境陈述

一个开放的研究问题是，在描述提示模式结构和思想时，哪种方法比正式语法更有效。我们提出了**基本上下文陈述的概念**，这是书面的描述重要的想法，以沟通的提示法学硕士。一个想法**可以根据用户的需求和经验以任意的方式重写和表达**。然而，要交流的关键思想是以**一系列简单但基本的陈述呈现给用户的**。

最终目标是**通过提供一个设计提示符的框架来增强提示符工程**，这些提示符可以重用和/或适应于其他llm，就像软件模式可以在不同的编程语言和平台中实现一样。但是，出于本文的目的，**使用ChatGPT+服务使用ChatGPT对所有提示符进行了测试**。由于ChatGPT具有广泛的可用性和普及性，我们将其作为本文中所有示例的LLM。这些示例是通过对互联网上社区发布的提示语料库的探索和从使用ChatGPT到自动化软件开发任务的独立提示创建进行记录的。

## 会话型LLMS的提示模式目录

本节介绍了我们的提示模式目录，这些模式被应用于**解决对话式LLM交互领域的常见问题**，以及**用于自动化软件任务的输出生成**。每个提示模式都伴随着具体的实现示例，以及有无提示的示例。

### Summary of the Prompt Pattern Catalog

在记录模式时，**提示模式的分类**是一个重要的考虑因素。表一概述了我们到目前为止在使用ChatGPT的工作中确定的提示模式目录的初始分类。

![image-20230925152838568](C:\Users\阿超\AppData\Roaming\Typora\typora-user-images\image-20230925152838568.png)

在我们的分类框架中有五类提示模式:输入语义、输出定制、错误识别、提示改进和交互，每一类都总结如下。

1. Input Semantics类别**处理LLM如何理解输入**，以及**如何将输入转换成可以用来生成输出的内容**。这一类包括**元语言创建模式**，该模式专注于创建一种自定义语言，以供LLM理解。
2. Output Customization类别**侧重于约束或裁剪LLM生成的输出的类型、格式、结构或其他属性**。这类的提示模式包括**自动输出、角色、可视化生成器、配方和模板模式**。Output Automater模式允许用户创建脚本，这些脚本可以自动执行LLM输出建议用户执行的任何任务。角色模式在生成输出时为LLM提供一个角色或角色。可视化生成器模式允许用户通过生成文本输出来生成可视化，这些文本输出可以提供给其他工具，如其他基于ai的图像生成器，如DALL-E[13]。Recipe模式允许用户获得一系列步骤或操作，以实现指定的最终结果，可能带有部分已知的信息或约束。Template模式允许用户为输出指定一个模板，LLM用内容填充该模板。
3. Error Identification类别侧重于**识别和解决LLM生成的输出中的错误**。此类别包括**事实检查列表和反射模式**。事实检查列表模式要求LLM生成一个应进行事实检查的事实列表，该列表是输出所依赖的事实。反射模式要求LLM对其输出进行内省并识别任何错误。
4. 提示改进类别侧重于**提高输入和输出的质量**。这一类包括**问题细化、替代方法、认知验证者和拒绝破坏模式。**问题细化模式确保LLM总是建议用户问题的更好版本。Alternative methods模式要求LLM提出完成用户指定任务的替代方法。认知验证者模式指示LLM在组合子问题的答案并生成整个问题的答案之前，自动建议用户回答一系列子问题。拒绝破坏模式要求LLM在拒绝给出答案时自动改写用户的问题。
5. 交互类别侧重于**用户与LLM之间的交互**。这一类别包括**翻转互动、游戏玩法和无限生成模式**。翻转交互模式要求LLM提出问题，而不是生成输出。Game Play模式要求LLM以游戏的形式生成输出。无限生成模式要求LLM无限地生成输出，而用户不必每次都重新输入生成器提示符。
6. 上下文控制类别侧重于**控制LLM操作的上下文信息**。这个类别包括上下文管理器模式，该模式允许用户为LLM的输出指定上下文。

### The Meta Language Creation Pattern

在与LLM对话期间，用户希望通过另一种语言创建提示符，例如图形的文本简写符号、状态机的状态描述和状态转换、提示符自动化的一组命令，等等。此模式的目的是**向LLM解释这种替代语言的语义，以便用户可以使用这种新语言及其语义编写未来的提示。**

虽然元语言创建是一种强大的模式，但必须谨慎使用，特别是在描述难以精确或简洁描述的概念时。因此，这些类型的提示最好用于全新的会话会话。为每个会话使用一个元语言会话也是一种最佳实践，因为它避免了在会话中应用冲突或意想不到的语义的可能性。

### The Output Automater Pattern

此模式的目的是**让LLM生成一个脚本或其他自动化工件**，可以**自动执行它建议作为输出的一部分执行的任何步骤**。其目标是减少实现任何LLM输出建议所需的手工工作。

### 翻转互动模式

希望LLM通过提问来获取执行某些任务所需的信息。因此，您希望LLM驱动对话，使其集中于实现特定的目标，而不是由用户驱动对话。例如，您可能希望LLM给您一个快速测试或自动提问，直到它有足够的信息为您的应用程序生成一个部署脚本到特定的云环境。

翻转交互模式的目标是**翻转交互流，让LLM向用户提问以实现某些预期目标。**

## RELATED WORK

模式在软件工程中被广泛使用，**以一种独立于实现细节的方式来表达设计结构的意图**。模式提供了模式试图实现的目标和试图解决的力量的心理画面。模式的一个关键优势是它们的可组合性，允许开发人员构建可用于解决复杂问题的模式序列和模式语言。

## Conclusion

本文提出了一个框架，用于记录和应用大型语言模型(如ChatGPT)的提示模式目录。这些提示模式类似于软件模式，旨在为用户在与llm交互以执行各种任务时所面临的问题提供可重用的解决方案。通过这个框架捕获的提示模式目录(1)提供了一种结构化的方式来讨论提示解决方案，(2)在提示中识别模式，而不是专注于特定的提示示例，(3)对模式进行分类，从而引导用户与llm进行更高效的交互。